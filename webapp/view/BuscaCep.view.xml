<mvc:View controllerName="sap.btp.logincep.controller.BuscaCep"
    xmlns:mvc="sap.ui.core.mvc"
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
	xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:table="sap.ui.table"
    xmlns="sap.m"
    displayBlock="true">

    <SplitApp id="SplitApp">
        <masterPages>
            <Page id="menuPage" title="Menu" class="customMasterPage">
                <customHeader>
                    <Bar id= "bar">
                        <contentMiddle>
                            <HBox id="hbox" class ="HboxImageAnglo">
                                <Image id ="imageTitulo" class="imageAnglo" src="images/Anglo_American_Logo_RGB_4C 1.png" height="50px" width="10px" />
                            </HBox>
                        </contentMiddle>
                    </Bar>
                </customHeader>
                <!-- <content class = "customContent">
                    <Button 
                        id="reloadButton"
                        icon="sap-icon://future"  
                        press="onReloadPress"
                        width="30px"
                        height="60px"
                        margin="10px 5 5 8px"
                        class="reloadButton" 
                        design="Transparent"/>
                </content> -->
         </Page>
        </masterPages>

        <detailPages>
            <Page id="pageBuscaCep" title="Busca CEP" class = "titleBuscaCep">
                <customHeader>
                    <Bar id="detailPageHeader">
                        <contentMiddle>
                            <Title class="pageTitle" id="pageTitle" />
                        </contentMiddle>
                        <contentRight>
                            <HBox id="headerBox">
                        
                                <Button id="userButton" type="Transparent" icon="sap-icon://person-placeholder" press="onUserPress" />
                                <Button id="logoutButton" text="Logout" icon="sap-icon://log" press="onLogout" type="Emphasized" class ="btnOnLogout" />
                                <Text id="userNameText" text="" />
                            </HBox>
                        </contentRight>
                    </Bar>
                </customHeader>
                <content>
                    <!-- <VBox id="vboxBuscaCep" visible="false" class = "VboxSearch">
                      <FlexBox id="search" class="FlexBoxSearch">
                        <Text id="textCep" text="Digite o CEP para buscar informações :" class = "textForHead" />
                        <Input id="inputEndereco" placeholder="Digite o CEP..."
                         liveChange="onLiveChange"
                        value="{path: 'yourModel>/cep', type: 'sap.ui.model.type.String'}" />
                        <Button id="btnBuscarEndereco" text="Buscar" press="onBuscarEndereco" class ="btnBuscaCep"/>
                      </FlexBox>
                      <VBox id="textResult" visible= "true"/>
                    </VBox> -->
                    <VBox class="vboxHistorico" id="vboxHistorico" visible="true">
                        <Table id="historicoTable" mode="SingleSelectMaster" class="myCustomTable">
                            <headerToolbar>
                                <Toolbar id="historicoToolbar" class="myCustomToolbar" >
                        
                                    <HBox id = "HboxPesquisaFiltro" class = "HboxPesquisaFiltro">
                                        <Input id="inputCep" placeholder="Buscar endereço no histórico..." width="20rem" 
                                         class="myCustomInput InputSearchTable"   liveChange="onLiveChange"
                                          value="{path: 'yourModel>/cep', type: 'sap.ui.model.type.String'}" />
                                        <Button id="btnBuscar" text="Pesquisar"  press="onBuscarCep" class=" btnSearch myCustomButton" />
                                         <HBox id ="HboxbtnFiltre" class ="HboxbtnFiltre">
                                            <Button id="btnBuscarEndereco1" icon="sap-icon://arrow-down" press="onFilter" class="btnFiltre" />
                                        </HBox> 
                                    </HBox>
                                    <Button id="btnGerarRelatorio" class = "btnGenerateReport" icon = "sap-icon://forward" text="Gerar Relatório" press="onGerarRelatorio"   type="Emphasized"/>
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column id="colData" class="myCustomColumn">
                                <HBox class ="HboxSortData" >
                                    <Text id="colDataText" text="Data" class="myCustomColumnHeader" />
                                    <Button id = "butonFilter1" icon="sap-icon://sort" press="onToggleSort" class="btnDataSort" />
                                </HBox>
                                </Column>
                                <Column id="colCep">
                                    <HBox class ="HboxSortData" >
                                        <Text id="colCepText" text="CEP Pesquisado" class="myCustomColumnHeader" />
                                        <Button id = "btnCepSearch" icon="sap-icon://sort" press="onToggleSort" class="btnCepSearch" />
                                     </HBox>
                                </Column>
                                <Column id="colResultado" class="myCustomColumn">
                                    <HBox class ="HboxSortData" >
                                          <Text id="colResultadoText" text="Resultado" class="myCustomColumnHeader" />
                                          <Button  id =  "butonFilter2" icon="sap-icon://sort" press="onToggleSort" class="btnSortResult" />
                                    </HBox>
                                </Column>
                                <Column id="colDescricao" class="myCustomColumn" width ="15%">
                                    <Text id="colDescricaoText" text="Descrição" class="myCustomColumnHeader" />
                                </Column>
                                <Column id="colAcoes" class="myCustomColumn" width="10%">
                                    <Text id="coAcoesText" text="Acões" class="myCustomColumnHeader" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem id="teste" type="Active" class="myCustomListItem">
                                    <cells>
                                        <Text id="historicoDataText" text="{historico>data}" class="myCustomText myCustomTextData" />
                                        <Text id="historicoCepText" text="{historico>cep}" class="myCustomText myCustomTextCep"  />
                                        <Text id="historicoResultadoText" text="{historico>resultado}" class="myCustomText myCustomTextResultado" />
                                        <Text id="historicoDescricaoText" text="{historico>descricao}" class="myCustomText myCustomTextResultado" />
                                        
                                    </cells>
                                </ColumnListItem>
                            </items>
                            
                        </Table>
                        <Text id = "itemCountText" class = "itemCountText"/>
                    </VBox>
					<VBox>
						<smartTable:SmartTable
                            id="SmartTable"
                            initialVisibleFields="cep,data,dataConvertida,descricao,id,resultado,userId"
                            entitySet="Products"
                            tableBindingPath="/oData/teste" 
                            useTablePersonalisation="true"
                            showRowCount="true"
                            showFullScreenButton="true"
                            enableAutoBinding="true"
                            enableExport="true" 
                            persistencyKey="SmartTableKey"
                            smartFilterId="smartFilterBar" 
                            demandPopin="true" 
                            ignoreFromPersonalisation="false"
                             showVariantManagement="true"
    showTablePersonalisation="true"
                            tableType="ResponsiveTable"
                            useVariantManagement="false"
                            header="Histórico de Endereços"
                            class="sapUiResponsiveContentPadding" 
                            enableAutoColumnWidth="false"
                            beforeExport="onBeforeExport"

                            >
                
                <table:Table
                    id="innerTable"
                    enableColumnReordering="true"
                    visibleRowCount="10">
                    
                    <!-- Coluna para CEP -->
                    <table:Column sortProperty="cep"  filterProperty="cep"
                        visible="true">
                    
                        <Label text="CEP"/>
                        <table:template>
                            <Text text="{Products>cep}"/>
                        </table:template>
                    </table:Column>

                    <!-- Coluna para Data -->
                    <table:Column sortProperty="data"  filterProperty="data"
                        visible="true">
                        <Label text="Data"/>
                        <table:template>
                            <Text text="{Products>data}"/>
                        </table:template>
                    </table:Column>

                    <!-- Coluna para Data Convertida -->
                    <table:Column sortProperty="dataConvertida"  filterProperty="dataConvertida"
                    visible="true">
                        <Label text="Data Convertida"/>
                        <table:template>
                            <Text text="{Products>dataConvertida}"/>
                        </table:template>
                    </table:Column>

                    <!-- Coluna para Descrição -->
                    <table:Column sortProperty="descricao"  filterProperty="descricao"
                    visible="true">
                        <Label text="Descrição"/>
                        <table:template>
                            <Text text="{Products>descricao}"/>
                        </table:template>
                    </table:Column>

                    <!-- Coluna para ID -->
                    <table:Column sortProperty="id"  filterProperty="id" visible="true">
                        <Label text="ID"/>
                        <table:template>
                            <Text text="{Products>id}"/>
                        </table:template>
                    </table:Column>

                    <!-- Coluna para Resultado -->
                    <table:Column sortProperty="resultado"  filterProperty="resultado"
    visible="true">
                        <Label text="Resultado"/>
                        <table:template>
                            <Text text="{Products>resultado}"/>
                        </table:template>
                    </table:Column>

                    <!-- Coluna para User ID -->
                    <table:Column sortProperty="ceuserIdp"  filterProperty="userId"
    visible="true">
                        <Label text="User ID"/>
                        <table:template>
                            <Text text="{Products>userId}"/>
                        </table:template>
                    </table:Column>

                </table:Table>
         </smartTable:SmartTable>
                    <!-- <headerToolbar>
                         <OverflowToolbar id="barflow" >
                            <ToolbarSpacer id="toolbarTable" />
                            <Button id="buttondelete" class="sapUiSmallMarginBeginEnd" type="Reject" icon="sap-icon://delete" text="Delete" press="onDelete"/>
                            <Button id="buttonadicionar" icon="sap-icon://edit" text="Adicionar" press="onAdd"/>

                        </OverflowToolbar> 
                    
                    </headerToolbar> 
            </Table> -->
					
					</VBox>
                </content>
            </Page>
        </detailPages>
    </SplitApp>
</mvc:View>
